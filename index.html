<!DOCTYPE html5>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>Ballade à Metz</title>
    <link href="css/bootstrap.min.css" rel="stylesheet"/>
    <link href="css/ballade-a-metz.css" rel="stylesheet"/>
    <!--if lt IE 9
    script(src='https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js')
    script(src='https://oss.maxcdn.com/respond/1.4.2/respond.min.js')
    
    -->
  </head>
  <body>
    <div data-audio="audio/mcour.mp3" data-image="img/pompidou.jpg" class="background pompidou"></div>
    <div data-audio="audio/blida.mp3" data-image="img/moselle.jpg" class="background moselle"></div>
    <div data-audio="audio/pole.mp3" data-image="img/porte-des-allemands.jpg" class="background porte"></div>
    <div data-audio="audio/pref.mp3" data-image="img/temple.jpg" class="background temple"></div>
    <div data-audio="audio/cime.mp3" data-image="img/plan-d-eau.jpg" class="background plandeau"></div>
    <div data-audio="audio/orgue.mp3" data-image="img/cathedrale.jpg" class="background cathedrale"></div>
    <div class="overlay"></div>
    <div class="container">
      <div class="content keep"><img src="img/logo.png" alt="Ballade à Metz" class="img-responsive center-block"/></div>
      <div class="spacer keep remove"></div>
      <div class="content keep remove">
        <p class="text-center">Chargement en cours...</p>
        <div class="progress">
          <div id="progress" role="progressbar" aria-valuemin="0" aria-valuemax="100" class="progress-bar progress-bar-info"></div>
        </div>
      </div>
      <div class="spacer"></div>
      <div class="content">
        <p class="text-center">Allumez le son et</p>
        <p class="text-center">faites défiler la page&nbsp;!</p>
        <h1 class="text-center"><span class="glyphicon glyphicon-arrow-down"></span></h1>
      </div>
      <div class="spacer"></div>
      <div class="content">
        <p>Ballade à Metz est une application mobile qui utilise la géolocalisation pour jouer la musique d'un endroit. Chaque lieu important est associé à un thème musical dont le volume dépend de la proximité du lieu. À ces thèmes s'ajoutent des petites mélodies qui correspondent à divers éléments urbains&nbsp;: une boîte postale, un arrêt de bus, un arbre centenaire...</p>
      </div>
      <div class="spacer"></div>
      <div class="content">
        <p>Ballade à Metz habille de musique vos déplacements dans la ville  pour mettre en valeur son patrimoine et faire redécouvrir le plaisir de s'y promener au gré d'une symphonie à chaque fois différente.</p>
      </div>
      <div class="spacer"></div>
      <div class="content">
        <p>Ballade à Metz est le projet proposé par l'équipe des <a href="http://nicepenguins.tumblr.com/" target="blank">Nice Penguins </a>(<a href="https://twitter.com/MCD_Artagnan" target="_blank">Anthony Guérin</a>, Baptiste Lesquoy, <a href="http://quentin.bonnard.eu" target="blank">Quentin Bonnard</a>, Jonhathan Lamont, <a href="https://twitter.com/Striwx" target="_blank">Yvan Corsiglia</a>) à l'occasion du <a href="http://grandestnumerique.org/retour-hackathon.php" target="_blank">Hackathon GEN Lorraine. </a>Il a remporté le Prix coup de coeur de <a href="http://www.metzmetropole.fr/actualite_detail.php?id=17041" target="_blank">Metz Métropole </a>et la <a href="http://metz.fr/actus/2014/141024_numerique_ballade_a_metz.php" target="_blank">Mairie de Metz </a>:)</p>
      </div>
      <div class="spacer"></div>
      <div class="content">
        <p>Le concept de la Ballade à Metz peut se décliner dans plusieurs contextes.</p>
      </div>
      <div class="spacer"></div>
      <div class="content">
        <p>L'application la plus évidente est dans le domaine du tourisme, pour (re)découvrir de façon ludique et poétique la ville de Metz.</p>
      </div>
      <div class="spacer"></div>
      <div class="content">
        <p>Les utilisateurs pourraient facilement créer et partager leurs propres habillages musicaux.</p>
      </div>
      <div class="spacer"></div>
      <div class="content">
        <p>Aussi, puisque l'application est exclusivement sonore, elle pourrait être adaptée aux non-voyants et mal-voyants.</p>
      </div>
      <div class="spacer"></div>
      <div class="content">
        <p>Enfin, la ballade peut évidemment habiller d'autres villes, d'autres lieux, ou d'autres événements. La musique pourrait venir des différents moyens de transport en commun, on pourrait entendre des citations ou des poèmes associés à des lieux précis, et caetera.</p>
      </div>
      <div class="spacer"></div>
      <div class="content">
        <p>Abonnez-vous à notre newsletter pour rester au courant&nbsp;!</p>
        <p>&nbsp;</p>
        <form action="https://docs.google.com/forms/d/1kVh7qiYzPOEwx-3m3Ub14tiN4H8NtFD5eCQPH4rpzCU/formResponse?embedded=true" method="POST" target="_blank" onsubmit="" role="form">
          <div class="form-group">
            <p>
              <label>Nom</label>
            </p>
            <p>
              <input type="text" name="entry.1609953104" value="" aria-label="Nom" aria-required="true" required=""/>
            </p>
          </div>
          <div class="form-group">
            <p>
              <label>Adresse email</label>
            </p>
            <p>
              <input type="email" name="entry.1423520718" value="" aria-label="Email" aria-required="true" required="" class="from-control"/>
            </p>
          </div>
          <div class="form-group">
            <p>
              <button type="submit" name="submit" value="Envoyer" class="btn btn-default">Envoyer</button>
            </p>
          </div>
        </form>
        <p>Musiques: <a href="https://twitter.com/MCD_Artagnan" target="_blank">Anthony Guérin </a>et <a href="https://twitter.com/Striwx" target="_blank">Yvan Corsiglia</a></p>
        <p>Photos: <a href="http://www.7h47.com/" target="_blank">Sébastien Persegol</a></p>
        <p>Design: <a href="http://quentin.bonnard.eu" target="blank">Quentin Bonnard</a></p>
      </div>
      <div class="spacer"></div>
    </div>
    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script>
      $(document).ready(function() {
          $('.content:not(.keep),.spacer:not(.keep)').each(function(e){$(this).hide(0);});
      
          var backgrounds = document.getElementsByClassName('background');
          var bgCount = backgrounds.length;
      
          var audioWeight=1;
          var imageWeight=1;
          var toLoad = bgCount*(imageWeight+audioWeight);
          var loaded = 0;
          var progressBar = document.getElementById('progress');
          function updateProgressBar(increment) {
              loaded += increment;
              progressBar.style.width = (100*loaded/toLoad)+"%";
              if (loaded >= toLoad) {
                  $('.content,.spacer').each(function(e){$(this).show();});
                  $('.remove').each(function(e){$(this).hide();});
                  $(document).scroll(setEnvironment);
                  setEnvironment();
              }
          };
      
          for (var i = 0; i < bgCount; i++) {
              audio = document.createElement('audio');
              audio.src = backgrounds[i].getAttribute('data-audio');
              audio.volume = 0;
              audio.loop=true;
              //audio.type="audio/mp3"
              audio.play()
      
              function audioLoaded() {
                  if (typeof this.alreadyLoaded === "undefined") {
                      this.alreadyLoaded = true;
                      updateProgressBar(audioWeight);
                  }
              }
              audio.addEventListener('canplaythrough', audioLoaded);
              backgrounds[i].appendChild(audio);
      
              img = document.createElement('img');
              img.src = backgrounds[i].getAttribute('data-image');
              
              img.addEventListener('load', function () {updateProgressBar(imageWeight);});
              img.style.display='none';
              backgrounds[i].appendChild(img);
          };
      
          function setEnvironment() {
              var maxScroll = document.body.scrollHeight-document.body.clientHeight;
              var scrollRatio = document.body.scrollTop / maxScroll;
              for (var i = 0; i < bgCount; i++) {
                  var x = scrollRatio*(bgCount-1);
                  var density = -1*(x-(i+1))*(x-(i-1));
                  density = Math.max(0,density);
                  density = Math.min(1,density);
                  backgrounds[i].style.opacity = density;
                  backgrounds[i].getElementsByTagName('audio')[0].volume = density;
              }
          };
      });
    </script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      
      ga('create', 'UA-56933738-1', 'auto');
      ga('send', 'pageview');
    </script>
  </body>
</html>